<% content_for :title, "Component audit" %>
<% add_gem_component_stylesheet("table") %>

<%= render "govuk_publishing_components/components/heading", {
  text: "Applications",
  heading_level: 1,
  font_size: "xl",
  margin_bottom: 8,
} %>

<%= @cache_status %><br>
<%= @performcache_status %>

<table class="govuk-table">
  <thead class="govuk-table__head">
    <tr class="govuk-table__row">
      <th scope="col" class="govuk-table__header sticky-table-header">Application</th>
      <th scope="col" class="govuk-table__header sticky-table-header">Gem version</th>
      <th scope="col" class="govuk-table__header sticky-table-header">Slimmer version</th>
    </tr>
  </thead>
  <tbody class="govuk-table__body">
    <% @applications_output.each do |app| %>
      <tr class="govuk-table__row">
        <td class="govuk-table__cell">
          <%= app[:name] %> <%= "[not found]" unless app[:found] %>
        </td>
        <td class="govuk-table__cell">
          <% if app[:gem_version] %>
            <%= render "govuk_publishing_components/components/tag", {
              text: app[:gem_version],
              colour: app[:gem_version_status],
            } %>
          <% end %>
        </td>
        <td class="govuk-table__cell">
          <% if app[:slimmer_version] %>
            <%= render "govuk_publishing_components/components/tag", {
              text: app[:slimmer_version],
            } %>
          <% end %>
        </td>
      <% end %>
    </tr>
  </tbody>
</table>
